%content#Content1{:contentplaceholderid => "head", :runat => "Server"}
%content#Content2{:contentplaceholderid => "ContentPlaceHolder1", :runat => "Server"}
  .MainPath
    .container
  .container
    .row
      .col-xs-12.col-sm-8.col-md-6
        = form_for(resource, as: resource_name, url: session_path(resource_name), :validate => true,html: { class: "eol-userform recaptchad uk-form-stacked" },
          defaults: { input_html: { class: 'uk-input' },
          wrapper_html: { class: 'field' },
          label_html: { class: 'uk-form-label' } }) do |f| 
          %h2 #{t(:sign_in)}
          %hr.colorgraph/
          .row
            .col-md-6.form-group
              %input.form-control.input-lg{:name => "user[email]", :placeholder => "#{t(:email)}", :tabindex => "1", :type => "text"}/
            .col-md-6.form-group
              %input.form-control.input-lg{:name => "user[password]", :placeholder => "#{t(:password)}", :tabindex => "2", :type => "password"}/
          .row
            .col-md-12.form-group
              .checkbox
                %label
                  %input#login-remember{:name => "user[remember]", :type => "checkbox", :value => "1"}/
                  #{t(:remember_me)}
                .pull-right.text-right
                  %a{:href => "/users/password/new?locale=en"} #{t(:forgot_your_password)}
            -# = form_with(model: @user, local: true) do |f|
            -unless params[:user].nil?
              -user = User.where("email = ? ", params[:user][:email]).first
              - if (!user.nil?) && (user.failed_attempts>=2)
                .row
                  .col-md-12.form-group
                    = f.label I18n.t(:recaptcha), required: true
                    = recaptcha_tags(theme: 'clean', callback: 'recaptchaCallback')
                    - if flash.any? { |name, msg| name == "recaptcha_error" }
                      %span.error
                        = I18n.t('recaptcha_error')
          .row
            .col-xs-12
              %input.btn.btn-success.btn-lg.btn-block{:type => "submit", :value => "#{t(:sign_in)}"}/
          .row
            .col-md-12
              .login-or
                %hr.hr-or/
                %span.span-or #{t(:or)}
          .row
            - if devise_mapping.omniauthable?
              - action = controller_name == 'registrations' ? "sign_up" : "sign_in"
              - if controller_name == 'registrations'
                - action = "sign_up"
                - action_name = "Sign Up"
              -else 
                - action = "sign_in"
                - action_name = "Sign In"
              .col-sm-6.form-group
                %a.btn.btn-primary.btn-block{ href: "/users/auth/twitter?intent=#{action}&locale=en" }
                  %i.fa.fa-twitter
              .col-sm-6.form-group
                %a.btn.btn-primary.btn-block{ href: "/users/auth/google_oauth2?intent=#{action}&locale=en" }
                  %i.fa.fa-google-plus
            .col-md-12
              %p
                %a{:href => "/users/confirmation/new?locale=en"} #{t(:no_confirmation_instructions)}
        .row
          %div
          .col-xs-12.col-sm-8
            %p
              #{t(:no_account)}
              %a{:href => "#{new_user_registration_path}"} #{t(:sign_up)}
