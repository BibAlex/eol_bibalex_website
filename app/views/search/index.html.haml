= javascript_include_tag "search_filter"
%body
  .container    
  %br
  %br
  .container    
    - unless params[:query].nil? || params[:query].empty? 
      .row
        .col-lg-9
          .row
            .col-lg-12
              %h2.mainTitle
                #{t(:search_results)}
              %br/
          - @results.each do|result| 
            - if result.instance_of? Page
              %article.search-result.row
                .col-xs-4.col-sm-4.col-md-2
                  - unless result.media.first.nil?
                    %img.thumbnail{ src: result.media.first.base_url , width: "100", height: "100"}/
                  - else
                    %img.thumbnail{ src: "/assets/download.png" , width: "100", height: "100"}/
                .col-xs-8.col-sm-8.col-md-10
                  %h3.marginTop0
                    %a{ href: page_path(result.id), title: ""} #{result.scientific_name}
            - elsif result.instance_of? Medium
              - @result = result
              = render("media_results")
              %span.clearfix.borda
          = will_paginate @results
        .col-lg-3
          %article.card-group-item.well
            %header.card-header
              %h2.mainTitle #{t(:filter_by_type)}
              = form_tag(main_app.search_path, method: :get, remote: true) do
                .row
                  %input#scientific_names{name: "scientific_names", type: "checkbox", onclick: "enableFilterButton()", checked: params[:scientific_names] == "true" ? "checked" : false}
                  %label{for: "scientific_names"} #{t(:scientific_names)}
                .row
                  %input#media{ name: "media", type: "checkbox", onclick: "enableFilterButton()", checked: params[:media] == "true" ? "checked" : false}
                  %label{for: "media"} #{t(:media)}
                %br
                = submit_tag "#{t(:filter)}", id: "filterSubmitTag", onClick: "submitFilterForm(\"#{params[:query]}\")"
